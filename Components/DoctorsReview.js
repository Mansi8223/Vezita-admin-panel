import React from 'react'

function DoctorsReview({data}) {
  if(data.ratingsAverage){
  var r = data.ratingsAverage
  var rating = r.toString()
  var rate = rating.split('.')[0]
  var des = rating.split('.')[1]
  var arr = []
  for (let i=0; i<rate; i++) {
    arr.push(i);
  }}

  return (
    <div className={`col-12 h-fit-content d-flex d-flex-column gap-3 bg-subtle rounded-12 p-4`}>
      <div className={`col-12 d-flex d-flex-row d-align-center d-justify-space-between`}>
        <h4 className={`f-600 l-26 text-darker`}>Ratings & reviews</h4>
        <div className={`d-flex d-flex-row d-align-center gap-1`}>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.281 9.02344L14.7497 11.9609L15.8669 16.5C15.9183 16.6903 15.9253 16.8898 15.8875 17.0832C15.8497 17.2766 15.7681 17.4588 15.6489 17.6157C15.5297 17.7727 15.3761 17.9002 15.1999 17.9884C15.0237 18.0767 14.8296 18.1235 14.6325 18.125C14.3912 18.1239 14.1552 18.0534 13.9528 17.9219L10.0075 15.4297H9.99191L6.32785 17.75C6.09115 17.8993 5.81528 17.9746 5.53554 17.9663C5.25579 17.9579 4.9849 17.8663 4.75754 17.7031C4.52329 17.5322 4.34588 17.2948 4.24835 17.0217C4.15082 16.7486 4.13769 16.4525 4.21066 16.1719L5.26535 12.0234L1.71847 9.02344C1.51724 8.85529 1.37099 8.63072 1.29859 8.37868C1.22618 8.12664 1.23093 7.85869 1.31222 7.60938C1.39139 7.36383 1.54242 7.14768 1.74576 6.9889C1.94911 6.83012 2.19543 6.73601 2.45285 6.71875L7.06222 6.42188L8.81222 2.0625C8.90607 1.82375 9.06943 1.61867 9.28115 1.47382C9.49287 1.32896 9.74319 1.25099 9.99972 1.25C10.2563 1.25099 10.5066 1.32896 10.7183 1.47382C10.93 1.61867 11.0934 1.82375 11.1872 2.0625L12.906 6.39844L17.5466 6.71875C17.8043 6.73496 18.0511 6.82868 18.2547 6.98761C18.4582 7.14654 18.609 7.36327 18.6872 7.60938C18.7685 7.85869 18.7733 8.12664 18.7009 8.37868C18.6285 8.63072 18.4822 8.85529 18.281 9.02344Z" fill="#F5C518"/>
          </svg>
          <h4 className={`f-600 l-26 text-yellow`}>{data.ratingsAverage}/5</h4>
        </div>
      </div>
      {data.reviews&& data.reviews.map((item,index)=>(<div key={index+1} className={`d-flex d-flex-column d-align-start gap-2`}>
        <div className={`d-flex d-flex-row d-align-center gap-3`}>
          {item.user.avatar?<img className={`image`} src={item.user.avatar} alt=''/>
          :<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="40" height="40" rx="20" fill="#82829B"/>
            <path d="M28.1168 27.1876C28.0634 27.2833 27.9851 27.3629 27.8903 27.4179C27.7954 27.4729 27.6874 27.5013 27.5778 27.5001H12.4215C12.3119 27.5013 12.2039 27.4729 12.109 27.4179C12.0142 27.3629 11.9359 27.2833 11.8825 27.1876C11.8252 27.0934 11.7949 26.9853 11.7949 26.8751C11.7949 26.7648 11.8252 26.6567 11.8825 26.5626C13.0487 24.5536 14.9153 23.0458 17.1246 22.3282C16.0657 21.6985 15.2427 20.7385 14.7823 19.5957C14.3218 18.4529 14.2493 17.1906 14.5758 16.0026C14.9023 14.8146 15.6099 13.7667 16.5897 13.0198C17.5696 12.2729 18.7676 11.8684 19.9996 11.8684C21.2317 11.8684 22.4297 12.2729 23.4095 13.0198C24.3894 13.7667 25.097 14.8146 25.4235 16.0026C25.75 17.1906 25.6775 18.4529 25.217 19.5957C24.7565 20.7385 23.9336 21.6985 22.8746 22.3282C25.0839 23.0458 26.9506 24.5536 28.1168 26.5626C28.1741 26.6567 28.2044 26.7648 28.2044 26.8751C28.2044 26.9853 28.1741 27.0934 28.1168 27.1876Z" fill="white"/>
          </svg>}
          <div className={`d-flex d-flex-column d-align-start`}>
            <h4 className={`f-500 l-26 text-darker`}>{item.user.name}</h4>
            <h5 className={`f-400 l-22 text-dark-grey`}>{item.createdAt}</h5>
          </div>
        </div>
        <div className={`d-flex d-flex-row d-align-center gap-2`}>
          {arr && arr.map((item,index)=>(
            <svg key={index+1} width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M18.281 9.02344L14.7497 11.9609L15.8669 16.5C15.9183 16.6903 15.9253 16.8898 15.8875 17.0832C15.8497 17.2766 15.7681 17.4588 15.6489 17.6157C15.5297 17.7727 15.3761 17.9002 15.1999 17.9884C15.0237 18.0767 14.8296 18.1235 14.6325 18.125C14.3912 18.1239 14.1552 18.0534 13.9528 17.9219L10.0075 15.4297H9.99191L6.32785 17.75C6.09115 17.8993 5.81528 17.9746 5.53554 17.9663C5.25579 17.9579 4.9849 17.8663 4.75754 17.7031C4.52329 17.5322 4.34588 17.2948 4.24835 17.0217C4.15082 16.7486 4.13769 16.4525 4.21066 16.1719L5.26535 12.0234L1.71847 9.02344C1.51724 8.85529 1.37099 8.63072 1.29859 8.37868C1.22618 8.12664 1.23093 7.85869 1.31222 7.60938C1.39139 7.36383 1.54242 7.14768 1.74576 6.9889C1.94911 6.83012 2.19543 6.73601 2.45285 6.71875L7.06222 6.42188L8.81222 2.0625C8.90607 1.82375 9.06943 1.61867 9.28115 1.47382C9.49287 1.32896 9.74319 1.25099 9.99972 1.25C10.2563 1.25099 10.5066 1.32896 10.7183 1.47382C10.93 1.61867 11.0934 1.82375 11.1872 2.0625L12.906 6.39844L17.5466 6.71875C17.8043 6.73496 18.0511 6.82868 18.2547 6.98761C18.4582 7.14654 18.609 7.36327 18.6872 7.60938C18.7685 7.85869 18.7733 8.12664 18.7009 8.37868C18.6285 8.63072 18.4822 8.85529 18.281 9.02344Z" fill="#F5C518"/>
            </svg>
          ))}
          {des && des && <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.6872 6.60934C17.609 6.36323 17.4582 6.1465 17.2547 5.98757C17.0511 5.82864 16.8043 5.73492 16.5466 5.71871L11.9372 5.42184C11.9304 5.42102 11.9239 5.41842 11.9185 5.41431C11.913 5.41019 11.9087 5.40471 11.906 5.3984L10.1872 1.06246C10.0944 0.822898 9.93139 0.616996 9.71945 0.471799C9.50752 0.326602 9.25662 0.248901 8.99972 0.248901C8.74282 0.248901 8.49193 0.326602 8.27999 0.471799C8.06806 0.616996 7.905 0.822898 7.81222 1.06246L6.09347 5.3984C6.09078 5.40471 6.08647 5.41019 6.08099 5.41431C6.0755 5.41842 6.06903 5.42102 6.06222 5.42184L1.45285 5.71871C1.19512 5.73492 0.948298 5.82864 0.744755 5.98757C0.541212 6.1465 0.390446 6.36323 0.312223 6.60934C0.230927 6.85865 0.226177 7.1266 0.298586 7.37864C0.370995 7.63068 0.517243 7.85525 0.718473 8.0234L4.24972 10.9609C4.25776 10.9689 4.26346 10.979 4.26621 10.99C4.26896 11.001 4.26866 11.0125 4.26535 11.0234L3.21066 15.1718C3.13878 15.4525 3.15243 15.7483 3.24988 16.0211C3.34733 16.294 3.52411 16.5315 3.75754 16.7031C3.9849 16.8663 4.25579 16.9579 4.53554 16.9663C4.81528 16.9746 5.09115 16.8993 5.32785 16.75L8.99191 14.4297H9.00754L12.9528 16.9218C13.1552 17.0534 13.3912 17.1239 13.6325 17.125C13.8988 17.1214 14.1576 17.0369 14.3747 16.8828C14.5868 16.729 14.7474 16.5145 14.8353 16.2677C14.9231 16.0209 14.9342 15.7532 14.8669 15.5L13.7341 11.0234C13.7308 11.0125 13.7305 11.001 13.7332 10.99C13.736 10.979 13.7417 10.9689 13.7497 10.9609L17.281 8.0234C17.4822 7.85525 17.6285 7.63068 17.7009 7.37864C17.7733 7.1266 17.7685 6.85865 17.6872 6.60934ZM16.4841 7.06246L12.945 9.99996C12.7571 10.1594 12.6179 10.3685 12.5433 10.6034C12.4687 10.8383 12.4617 11.0894 12.5232 11.3281L13.656 15.8047C13.6638 15.8359 13.6638 15.8437 13.656 15.8515C13.6508 15.8616 13.6426 15.8698 13.6325 15.875H13.6169L9.67941 13.375C9.47637 13.2458 9.24036 13.178 8.99972 13.1797V1.49996C9.00753 1.49996 9.01535 1.49996 9.02316 1.5234L10.7497 5.85934C10.8377 6.08506 10.9879 6.28121 11.1829 6.42502C11.3779 6.56883 11.6096 6.65441 11.8513 6.67184L16.4685 6.96871C16.4763 6.96871 16.4841 6.96871 16.4919 6.99996C16.4997 7.03121 16.4919 7.05465 16.4841 7.06246Z" fill="#F5C518"/>
          </svg>}
        </div>
        <div className={`d-flex d-flex-column`}>
          <h4 className={`f-500 l-26 text-darker`}>Visited for artery blockages</h4>
          <p className={`f-400 l-22 text-dark-grey`}>{item.review}</p>
        </div>
      </div>))}
      <div className={`d-flex d-flex-row gap-2 self-end mt-2`}>
        <h4 className={`f-600 l-20 text-uppercase text-primary`}>View all reviews</h4>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.49986 17.1875C7.25132 17.1865 7.01303 17.0883 6.8358 16.9141C6.7484 16.827 6.67905 16.7235 6.63173 16.6096C6.58442 16.4956 6.56006 16.3734 6.56006 16.25C6.56006 16.1266 6.58442 16.0045 6.63173 15.8905C6.67905 15.7766 6.7484 15.6731 6.8358 15.586L12.4217 10L6.8358 4.4141C6.65968 4.23798 6.56073 3.99911 6.56073 3.75004C6.56073 3.62671 6.58503 3.50459 6.63222 3.39065C6.67942 3.27671 6.74859 3.17318 6.8358 3.08598C6.923 2.99877 7.02653 2.9296 7.14047 2.8824C7.25441 2.8352 7.37653 2.81091 7.49986 2.81091C7.74893 2.81091 7.9878 2.90986 8.16392 3.08598L14.4139 9.33598C14.5013 9.42307 14.5707 9.52657 14.618 9.64052C14.6653 9.75448 14.6897 9.87665 14.6897 10C14.6897 10.1234 14.6653 10.2456 14.618 10.3596C14.5707 10.4735 14.5013 10.577 14.4139 10.6641L8.16392 16.9141C7.98669 17.0883 7.7484 17.1865 7.49986 17.1875Z" fill="#3085F4"/>
        </svg>
      </div>
    </div>
  )
}

export default DoctorsReview